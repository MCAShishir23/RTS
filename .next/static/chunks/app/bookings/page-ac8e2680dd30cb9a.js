(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{9469:(e,t,l)=>{Promise.resolve().then(l.bind(l,6160))},6160:(e,t,l)=>{"use strict";l.d(t,{default:()=>s});var r=l(5155),a=l(2115);function s(){let[e,t]=(0,a.useState)([]),[l,s]=(0,a.useState)(!1),[d,n]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let e=await fetch("https://rtm-backend-o47d.onrender.com/getBookings");t(await e.json())})()},[]);let o=e=>{n(e),s(!0)},c=()=>{s(!1),n(null)},i=async l=>{l.preventDefault();let r=l.target,a=r.elements.namedItem("name").value,s=r.elements.namedItem("contact").value,n={name:a,contact:s,date:r.elements.namedItem("date").value,time:r.elements.namedItem("time").value,guests:Number(r.elements.namedItem("guests").value)};if(d)try{(await fetch("https://rtm-backend-o47d.onrender.com/editBooking/".concat(d.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok&&(t(e.map(e=>e.id===d.id?{...e,...n}:e)),c())}catch(e){console.error("Error editing booking:",e)}},b=async l=>{if(window.confirm("Are you sure you want to delete this booking?"))try{(await fetch("https://rtm-backend-o47d.onrender.com/deleteBooking/".concat(l),{method:"DELETE"})).ok?(t(e.filter(e=>e.id!==l)),alert("Booking deleted successfully!")):alert("Failed to delete booking. Please try again.")}catch(e){console.error("Error deleting booking:",e),alert("Error deleting booking. Please try again later.")}};return(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"All Bookings"}),(0,r.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Contact"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Date"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Time"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Guests"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.name}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.contact}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.date}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.time}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.guests}),(0,r.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded mr-2",onClick:()=>o(e),children:"Edit"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded",onClick:()=>b(e.id),children:"Delete"})]})]},t))})]}),l&&d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center",children:(0,r.jsxs)("div",{className:"bg-black p-6 rounded shadow-lg w-96",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Edit Booking"}),(0,r.jsxs)("form",{onSubmit:i,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block",children:"Name:"}),(0,r.jsx)("input",{type:"text",name:"name",defaultValue:null==d?void 0:d.name,className:"border-2 border-blue-500 p-2 w-full bg-blue-50 text-black",placeholder:"Enter your name"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block",children:"Contact:"}),(0,r.jsx)("input",{type:"text",name:"contact",defaultValue:null==d?void 0:d.contact,className:"border-2 border-green-500 p-2 w-full bg-green-50 text-black",placeholder:"Enter your contact number"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block",children:"Date:"}),(0,r.jsx)("input",{type:"text",name:"date",defaultValue:null==d?void 0:d.date,className:"border-2 border-red-500 p-2 w-full bg-red-50 text-black",placeholder:"Enter booking date"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block",children:"Time:"}),(0,r.jsx)("input",{type:"text",name:"time",defaultValue:null==d?void 0:d.time,className:"border-2 border-purple-500 p-2 w-full bg-purple-50 text-black",placeholder:"Enter booking time"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block",children:"Guests:"}),(0,r.jsx)("input",{type:"number",name:"guests",defaultValue:null==d?void 0:d.guests,className:"border-2 border-yellow-500 p-2 w-full bg-yellow-50 text-black",placeholder:"Enter number of guests"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-500 text-white rounded",onClick:c,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Save"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(9469)),_N_E=e.O()}]);